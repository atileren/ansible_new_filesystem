---

  - hosts: filesystem
    vars_prompt:
      - name: "filesystem"
        prompt: "filesystem name: "
        private: no
      - name: "disk"
        prompt: "physical device(/dev/sdxx): "
        private: no

    tasks:
      - name: volume group olustur
        lvg:
          vg: vg_{{ filesystem }}
          pvs: "{{ disk }}"

      - name: lvm olustur
        lvol:
          vg: vg_{{ filesystem }}
          lv: lv_{{ filesystem }}
          size: 100%FREE

      - name: filesystem olustur
        filesystem:
          fstype: ext4
          dev: /dev/vg_{{ filesystem }}/lv_{{ filesystem }}
        when: ansible_distribution_major_version == '6'

      - name: filesystem olustur
        filesystem:
          fstype: xfs
          dev: /dev/vg_{{ filesystem }}/lv_{{ filesystem }}
        when: ansible_distribution_major_version == '7'

      - name: mount filesystem
        mount:
          name: /{{ filesystem }}
          src: /dev/vg_{{ filesystem }}/lv_{{ filesystem }}
          fstype: ext4
          state: mounted
        when: ansible_distribution_major_version == '6'

      - name: mount filesystem
        mount:
          name: /{{ filesystem }}
          src: /dev/vg_{{ filesystem }}/lv_{{ filesystem }}
          fstype: xfs
          state: mounted
        when: ansible_distribution_major_version == '7'
